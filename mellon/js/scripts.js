$(function(){$('div.form-group-type-multi_checkbox label input[type="checkbox"]').after('<i></i>');$('div.form-group-type-checkbox label').on('click',function(e){if($(e.target).is('a')){return true;}
$(this).tooltip('destroy');var $elem=$(this).find('input:not([type=hidden])');if($elem.length){$elem.prop('checked',!$elem.prop('checked'));if($elem.prop('checked')){$elem.attr('checked','checked');}else{$elem.removeAttr('checked');}
return false;}});$('form').on('submit',function(e){var $elem=$(this);if($elem.data('locked')){e.stopImmediatePropagation();return false;}
$elem.data('locked',true);return true;});$('a[href^="/"]').each(function(){var $elem=$(this),href=$elem.attr("href");$elem.attr('hrefSaved',href);$elem.removeAttr('href').css('cursor','pointer').click(function(){location.href=href;return false;});});$('.submit-on-click').each(function(){var $elem=$(this);$elem.click(function(){$elem.click(function(){return false;});var submittedBy=$('<input type="hidden" name="submittedBy"/>');submittedBy.val($elem.attr('id'));$elem.closest('form').append(submittedBy).css('cursor','wait').submit();return false;});});$('.set-writable').each(function(){var $elem=$(this);$elem.click(function(){$elem.parent().children('input[readonly]').prop('readonly','');$elem.removeClass($elem.data('markerClassReadonly')).addClass($elem.data('markerClassWritable')).click(function(){var submittedBy=$('<input type="hidden" name="submittedBy"/>');submittedBy.val($elem.attr('id'));$elem.closest('form').append(submittedBy).css('cursor','wait').submit();return false;});return false;});});$('.mandatory-field').each(function(){var elem=$(this);var dependent=elem.closest('form').find('.require-mandatory');var lockedBy;dependent.each(function(){$(this).data('lockedBy',$(this).data('lockedBy')||{});});var marker=elem.parent().children('.marker-element').first();if(!marker.length){marker=$('<span class="marker-element"></span>');elem.removeClass('form-control').wrap($('<span class="form-control"></span>'));elem.after(marker);}
var onChange=function(){if($.trim(elem.val())){marker.removeClass(elem.data('markerClassEmpty')).addClass(elem.data('markerClassNonEmpty'));dependent.each(function(){lockedBy=$(this).data('lockedBy');delete lockedBy[elem.attr('name')];$(this).data('lockedBy',lockedBy);if($.isEmptyObject(lockedBy)){$(this).prop('disabled','');}});}else{marker.removeClass(elem.data('markerClassNonEmpty')).addClass(elem.data('markerClassEmpty'));dependent.each(function(){lockedBy=$(this).data('lockedBy');lockedBy[elem.attr('name')]=1;$(this).data('lockedBy',lockedBy);$(this).prop('disabled','disabled');});}};onChange();elem.on("input",onChange);});});